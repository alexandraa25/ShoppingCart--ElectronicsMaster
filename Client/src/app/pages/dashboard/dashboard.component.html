<app-popup-message
  [isVisible]="popupVisible"
  [title]="popupTitle"
  [message]="popupMessage"
  [isError]="popupIsError"
  [confirmMode]="popupConfirmMode"
  (close)="closePopup()"
  (confirm)="handleConfirm()">
</app-popup-message>

<div class="admin-dashboard">

  <mat-tab-group mat-align-tabs="center" class="dashboard-tabs">

    <!-- TAB Produse -->
    <mat-tab label="â• AdaugÄƒ produs">
      <app-product-form></app-product-form>
    </mat-tab>

    <!-- TAB Comenzi -->
    <mat-tab label="ğŸ“¦ Comenzi">

      <div *ngIf="orders.length === 0" class="orders-placeholder">
        Nu existÄƒ comenzi Ã®n sistem.
      </div>

      <table *ngIf="orders.length > 0" class="orders-table">
        <thead>
        <tr>
          <th>ID</th>
          <th>Client</th>
          <th>Email</th>
          <th>Produse</th>
          <th>Total</th>
          <th>Status</th>
          <th>Data</th>
        </tr>
        </thead>

        <tbody>
        <tr *ngFor="let order of orders">
          <td>#{{order.id}}</td>
          <td>{{order.user.firstName}} {{order.user.lastName}}</td>
          <td>{{order.user.email}}</td>
          <td>
  <div *ngFor="let item of order.items">
    {{ item.product?.name || 'Produs È™ters' }} x{{ item.quantity }}
  </div>
</td>
          <td>
          <td>{{order.total}} lei</td>
          <td>{{order.status}}</td>
          <td>{{order.createdAt | date:'dd MMM yyyy, HH:mm'}}</td>
        </tr>
        </tbody>
      </table>

    </mat-tab>

    <!-- TAB Utilizatori -->
    <mat-tab label="ğŸ‘¥ Utilizatori">

      <div class="user-search">
        <input type="text" placeholder="CautÄƒ..." [(ngModel)]="searchUserName" (input)="filterUsers()">
      </div>

      <table class="users-table">
        <thead>
        <tr>
          <th>ID</th>
          <th>Nume</th>
          <th>Email</th>
          <th>Telefon</th>
          <th>AcÈ›iuni</th>
        </tr>
        </thead>

        <tbody>
        <tr *ngFor="let user of paginatedUsers">
          <td>{{user.id}}</td>
          <td>{{user.name}}</td>
          <td>{{user.email}}</td>
          <td>{{user.phoneNumber || '-'}}</td>

          <td>
            <button class="btn-delete" (click)="confirmDeleteUser(user.id)">ğŸ—‘ï¸ È˜terge</button>
          </td>
        </tr>
        </tbody>
      </table>

    </mat-tab>

  </mat-tab-group>

</div>
